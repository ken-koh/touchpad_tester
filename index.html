<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Touchpad Testing Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Prevent browser zoom only on specific views */
        #debug-view,
        #graph-view,
        #shapes-view {
            touch-action: none;
        }
        /* Allow zooming on browse and maps views */
        #browse-view,
        #maps-view {
            touch-action: auto;
        }
    </style>
</head>
<body>
    <!-- Tab Navigation -->
    <nav class="tab-nav">
        <button class="tab-btn" data-tab="debug">Debug Dashboard</button>
        <button class="tab-btn active" data-tab="browse">Browse Mode</button>
        <button class="tab-btn" data-tab="maps">Maps Mode</button>
        <button class="tab-btn" data-tab="graph">Graph View</button>
        <button class="tab-btn" data-tab="shapes">Shape Tests</button>
    </nav>

    <!-- Debug Dashboard View -->
    <div id="debug-view" class="view">
        <div class="dashboard">
            <header>
                <h1>Touchpad Testing Dashboard</h1>
            </header>

            <main class="panels-grid">
                <!-- Left Column: Scroll + Zoom -->
                <div class="left-column">
                    <!-- Scroll Value Display -->
                    <section class="panel scroll-panel">
                        <h2>Scroll Values</h2>
                        <!-- Scrollable area for VR scroll detection -->
                        <div class="scroll-detect-wrapper">
                            <div class="scroll-detect-area" id="scroll-detect-area">
                                <div class="scroll-detect-content"></div>
                            </div>
                            <div class="scroll-detect-overlay">
                                <div class="scroll-detect-label">Scroll here to detect</div>
                                <div class="scroll-display">
                                    <div class="scroll-item">
                                        <span class="label">Delta X</span>
                                        <span id="delta-x" class="value">0</span>
                                    </div>
                                    <div class="scroll-item">
                                        <span class="label">Delta Y</span>
                                        <span id="delta-y" class="value">0</span>
                                    </div>
                                    <div class="scroll-item">
                                        <span class="label">Total X</span>
                                        <span id="total-x" class="value">0</span>
                                    </div>
                                    <div class="scroll-item">
                                        <span class="label">Total Y</span>
                                        <span id="total-y" class="value">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button id="reset-scroll" class="reset-btn">Reset</button>
                    </section>

                    <!-- Zoom Visualization -->
                    <section class="panel zoom-panel">
                        <h2>Zoom <span id="zoom-level" class="zoom-value">100%</span></h2>
                        <div class="zoom-visualization">
                            <div id="dot-left" class="zoom-dot"></div>
                            <div id="dot-right" class="zoom-dot"></div>
                        </div>
                        <button id="reset-zoom" class="reset-btn">Reset</button>
                    </section>
                </div>

                <!-- Center: Touchpad -->
                <section class="panel touchpad-panel">
                    <h2>Touchpad</h2>
                    <div class="touchpad">
                        <div class="touchpad-surface"></div>
                        <div class="touchpad-buttons">
                            <div id="left-button" class="touchpad-button left">L</div>
                            <div id="right-button" class="touchpad-button right">R</div>
                        </div>
                    </div>
                </section>

                <!-- Right Column: Event Data -->
                <section class="panel events-panel">
                    <h2>Event Data</h2>
                    <div class="event-grid">
                        <div class="event-item">
                            <span class="label">Type</span>
                            <span id="event-type" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Button</span>
                            <span id="event-button" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Buttons</span>
                            <span id="event-buttons" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Pointer</span>
                            <span id="pointer-type" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Position</span>
                            <span id="event-position" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Movement</span>
                            <span id="event-movement" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Pressure</span>
                            <span id="event-pressure" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Tilt</span>
                            <span id="event-tilt" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Touches</span>
                            <span id="touch-count" class="value">-</span>
                        </div>
                        <div class="event-item">
                            <span class="label">Primary</span>
                            <span id="is-primary" class="value">-</span>
                        </div>
                    </div>
                    <div class="event-log">
                        <div class="log-header">
                            <span>Event Log</span>
                            <button id="clear-log" class="clear-btn">Clear</button>
                        </div>
                        <div id="event-log-content" class="log-content"></div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Browse Mode View -->
    <div id="browse-view" class="view active">
        <!-- Sticky Debug Bar -->
        <div class="debug-bar">
            <div class="state-indicator">
                <span class="state-label">State:</span>
                <span id="current-state" class="state-value">idle</span>
            </div>
            <div class="bar-stats">
                <div class="bar-stat">
                    <span class="bar-label">Scroll:</span>
                    <span id="bar-scroll" class="bar-value">0, 0</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Zoom:</span>
                    <span id="bar-zoom" class="bar-value">100%</span>
                    <button id="reset-article-zoom" class="bar-reset-btn">Reset</button>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Click:</span>
                    <span id="bar-click" class="bar-value">-</span>
                </div>
            </div>
            <div class="gesture-info">
                <div class="bar-stat">
                    <span class="bar-label">Gesture:</span>
                    <span id="bar-gesture" class="bar-value gesture">-</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Fingers:</span>
                    <span id="bar-fingers" class="bar-value">0</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Pinch:</span>
                    <span id="bar-pinch" class="bar-value">-</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Swipe:</span>
                    <span id="bar-swipe" class="bar-value">-</span>
                </div>
            </div>
            <button id="toggle-event-log" class="bar-toggle-btn">Hide Log</button>
        </div>

        <!-- Floating Event Log -->
        <div class="floating-event-log">
            <div class="floating-log-header">
                <span>Event Log</span>
                <button id="clear-browse-log" class="clear-btn">Clear</button>
            </div>
            <div id="browse-event-log-content" class="log-content"></div>
        </div>

        <!-- Right-click Context Menu for Browse Mode -->
        <div id="browse-context-menu" class="context-menu hidden">
            <div class="context-menu-item" data-action="back">
                <span class="menu-icon">‚Üê</span>
                <span>Back</span>
                <span class="menu-shortcut">Alt+‚Üê</span>
            </div>
            <div class="context-menu-item" data-action="forward">
                <span class="menu-icon">‚Üí</span>
                <span>Forward</span>
                <span class="menu-shortcut">Alt+‚Üí</span>
            </div>
            <div class="context-menu-item" data-action="reload">
                <span class="menu-icon">‚Üª</span>
                <span>Reload</span>
                <span class="menu-shortcut">Ctrl+R</span>
            </div>
            <div class="context-menu-divider"></div>
            <div class="context-menu-item" data-action="save">
                <span class="menu-icon">üíæ</span>
                <span>Save page as...</span>
                <span class="menu-shortcut">Ctrl+S</span>
            </div>
            <div class="context-menu-item" data-action="print">
                <span class="menu-icon">üñ®Ô∏è</span>
                <span>Print...</span>
                <span class="menu-shortcut">Ctrl+P</span>
            </div>
            <div class="context-menu-divider"></div>
            <div class="context-menu-item" data-action="copy">
                <span class="menu-icon">üìã</span>
                <span>Copy</span>
                <span class="menu-shortcut">Ctrl+C</span>
            </div>
            <div class="context-menu-item" data-action="select-all">
                <span class="menu-icon">‚òëÔ∏è</span>
                <span>Select all</span>
                <span class="menu-shortcut">Ctrl+A</span>
            </div>
            <div class="context-menu-divider"></div>
            <div class="context-menu-item" data-action="view-source">
                <span class="menu-icon">üìÑ</span>
                <span>View page source</span>
                <span class="menu-shortcut">Ctrl+U</span>
            </div>
            <div class="context-menu-item" data-action="inspect">
                <span class="menu-icon">üîß</span>
                <span>Inspect</span>
                <span class="menu-shortcut">Ctrl+Shift+I</span>
            </div>
        </div>

        <!-- Mock Wikipedia Article -->
        <article class="wiki-article">
            <div class="wiki-header">
                <h1>Laptop Trackpad</h1>
            </div>

            <div class="wiki-content">
                <div class="wiki-infobox">
                    <div class="infobox-title">Trackpad</div>
                    <div class="infobox-image">
                        <div class="placeholder-image">
                            <span>Trackpad Illustration</span>
                        </div>
                    </div>
                    <table class="infobox-table">
                        <tr><th>Type</th><td>Pointing device</td></tr>
                        <tr><th>Inventor</th><td>George E. Gerpheide</td></tr>
                        <tr><th>Inception</th><td>1988</td></tr>
                        <tr><th>Also known as</th><td>Touchpad, glide pad, glide point</td></tr>
                    </table>
                </div>

                <p class="wiki-intro">
                    A <strong>trackpad</strong> (also called a <strong>touchpad</strong>) is a pointing device featuring a tactile sensor,
                    a specialized surface that can translate the motion and position of a user's fingers to a relative position on
                    the operating system that is made output to the screen. Trackpads are a common feature of laptop computers and
                    are also used as a substitute for a mouse where desk space is limited.
                </p>

                <div class="wiki-toc">
                    <h2>Contents</h2>
                    <ol>
                        <li><a href="#history">History</a></li>
                        <li><a href="#technology">Technology</a></li>
                        <li><a href="#gestures">Multi-touch gestures</a></li>
                        <li><a href="#manufacturers">Major manufacturers</a></li>
                    </ol>
                </div>

                <section id="history">
                    <h2>History</h2>
                    <p>
                        The first touchpad was invented by George E. Gerpheide in 1988. The technology was later licensed to
                        Apple Computer, who introduced it in the PowerBook series in 1994, making it the first mainstream laptop
                        to include a touchpad as standard equipment.
                    </p>
                    <p>
                        Early touchpads were relatively simple, supporting only basic cursor movement and tap-to-click functionality.
                        The technology has since evolved significantly, with modern trackpads supporting multi-touch gestures,
                        pressure sensitivity, and haptic feedback.
                    </p>
                    <div class="wiki-image-block">
                        <div class="placeholder-image large">
                            <span>Early PowerBook Trackpad (1994)</span>
                        </div>
                        <p class="image-caption">The Apple PowerBook 500 series was among the first laptops to feature a built-in trackpad.</p>
                    </div>
                </section>

                <section id="technology">
                    <h2>Technology</h2>
                    <p>
                        Modern trackpads typically use one of two technologies: <strong>capacitive sensing</strong> or
                        <strong>resistive sensing</strong>. Capacitive touchpads, which are more common in contemporary devices,
                        detect the electrical properties of the human finger to determine touch position and movement.
                    </p>

                    <h3>Capacitive Sensing</h3>
                    <p>
                        Capacitive trackpads work by measuring the capacitance at various points across the pad surface. When a
                        finger approaches or touches the surface, it changes the local electrostatic field, which is detected by
                        the sensor array. This allows for precise tracking of finger position and movement.
                    </p>

                    <h3>Force Touch and Haptic Feedback</h3>
                    <p>
                        Recent advancements include Force Touch technology, which can detect different levels of pressure applied
                        to the trackpad surface. Combined with haptic feedback motors (taptic engines), these trackpads can simulate
                        the feeling of a physical click even though the surface doesn't actually move.
                    </p>
                    <div class="wiki-image-block">
                        <div class="placeholder-image large">
                            <span>Capacitive Sensor Array Diagram</span>
                        </div>
                        <p class="image-caption">Diagram showing the capacitive sensor grid underneath a typical trackpad surface.</p>
                    </div>
                </section>

                <section id="gestures">
                    <h2>Multi-touch Gestures</h2>
                    <p>
                        Modern trackpads support a variety of multi-touch gestures that allow users to perform complex actions
                        with simple finger movements. Common gestures include:
                    </p>

                    <table class="wiki-table">
                        <thead>
                            <tr>
                                <th>Gesture</th>
                                <th>Fingers</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Tap</td>
                                <td>1</td>
                                <td>Left click</td>
                            </tr>
                            <tr>
                                <td>Two-finger tap</td>
                                <td>2</td>
                                <td>Right click (context menu)</td>
                            </tr>
                            <tr>
                                <td>Two-finger scroll</td>
                                <td>2</td>
                                <td>Scroll vertically or horizontally</td>
                            </tr>
                            <tr>
                                <td>Pinch</td>
                                <td>2</td>
                                <td>Zoom in or out</td>
                            </tr>
                            <tr>
                                <td>Three-finger swipe</td>
                                <td>3</td>
                                <td>Switch between applications or desktops</td>
                            </tr>
                            <tr>
                                <td>Four-finger swipe</td>
                                <td>4</td>
                                <td>Show desktop or mission control</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        The implementation and availability of these gestures varies between operating systems and trackpad
                        manufacturers. Windows Precision Touchpad drivers and Apple's trackpad drivers offer some of the most
                        comprehensive gesture support.
                    </p>
                </section>

                <section id="manufacturers">
                    <h2>Major Manufacturers</h2>
                    <p>
                        Several companies specialize in the development and manufacturing of trackpad technology:
                    </p>
                    <ul class="wiki-list">
                        <li><strong>Synaptics</strong> - One of the largest touchpad manufacturers, supplying components to many laptop brands</li>
                        <li><strong>ELAN Microelectronics</strong> - Major supplier of touchpad solutions for Windows laptops</li>
                        <li><strong>Apple</strong> - Designs and manufactures their own trackpads with proprietary Force Touch technology</li>
                        <li><strong>Alps Alpine</strong> - Supplies touchpad components to various laptop manufacturers</li>
                        <li><strong>Cirque Corporation</strong> - Pioneer in touchpad technology, now a subsidiary of Alps Alpine</li>
                    </ul>

                    <div class="wiki-image-block">
                        <div class="placeholder-image large">
                            <span>Modern Glass Trackpad</span>
                        </div>
                        <p class="image-caption">A modern glass-surface trackpad with edge-to-edge design, common in premium laptops.</p>
                    </div>
                </section>

                <section id="driver-software">
                    <h2>Driver Software and Configuration</h2>
                    <p>
                        Trackpad functionality is heavily dependent on driver software, which translates raw touch data into
                        meaningful input events. The quality of driver software can significantly impact the user experience,
                        affecting gesture recognition accuracy, palm rejection, and overall responsiveness.
                    </p>
                    <h3>Windows Precision Touchpad</h3>
                    <p>
                        Microsoft introduced the Windows Precision Touchpad specification to standardize trackpad behavior
                        across Windows devices. Precision Touchpads communicate directly with Windows using the HID protocol,
                        allowing the operating system to handle gesture recognition consistently. This results in more reliable
                        multi-touch gestures and better integration with Windows features like virtual desktops.
                    </p>
                    <h3>macOS Trackpad Drivers</h3>
                    <p>
                        Apple's trackpad drivers are tightly integrated with macOS, providing seamless gesture support that
                        is consistent across all Mac devices. The drivers support features like natural scrolling, Mission Control
                        gestures, and application-specific trackpad behaviors. The tight hardware-software integration allows
                        Apple to offer features like Force Touch that require precise calibration.
                    </p>
                    <h3>Linux Touchpad Support</h3>
                    <p>
                        On Linux systems, trackpad support is typically provided by libinput or the older Synaptics driver.
                        Libinput has become the standard input handling library for Wayland compositors and modern X.Org setups,
                        offering improved gesture support and better default configurations compared to earlier solutions.
                    </p>
                </section>

                <section id="ergonomics">
                    <h2>Ergonomics and Health Considerations</h2>
                    <p>
                        Extended use of trackpads can lead to repetitive strain injuries (RSI) if proper ergonomic practices
                        are not followed. The repetitive finger movements required for trackpad operation, particularly
                        clicking and scrolling, can strain the tendons and muscles of the hand and forearm.
                    </p>
                    <p>
                        Ergonomic recommendations for trackpad use include:
                    </p>
                    <ul class="wiki-list">
                        <li><strong>Proper positioning</strong> - Keep the wrist in a neutral position while using the trackpad</li>
                        <li><strong>Use tap-to-click</strong> - Reduces the force required compared to physical clicking</li>
                        <li><strong>Take regular breaks</strong> - Follow the 20-20-20 rule: every 20 minutes, look at something 20 feet away for 20 seconds</li>
                        <li><strong>Use keyboard shortcuts</strong> - Reduces reliance on the trackpad for common operations</li>
                        <li><strong>Consider external devices</strong> - For extended use, an external mouse or trackball may be more ergonomic</li>
                    </ul>
                    <div class="wiki-image-block">
                        <div class="placeholder-image large">
                            <span>Ergonomic Hand Position</span>
                        </div>
                        <p class="image-caption">Proper hand positioning when using a laptop trackpad to minimize strain.</p>
                    </div>
                </section>

                <section id="gaming">
                    <h2>Gaming on Trackpads</h2>
                    <p>
                        While trackpads are generally not considered ideal for gaming due to their limited precision and
                        lack of physical feedback, some games can be played effectively with a trackpad. Turn-based strategy
                        games, point-and-click adventures, and casual games are well-suited to trackpad input.
                    </p>
                    <p>
                        For more demanding games, particularly first-person shooters or competitive multiplayer titles,
                        most gamers prefer a dedicated gaming mouse. However, some laptop manufacturers have developed
                        gaming-oriented trackpads with larger surfaces, higher polling rates, and customizable sensitivity
                        settings to improve the gaming experience.
                    </p>
                    <h3>Trackpad Gaming Techniques</h3>
                    <p>
                        Experienced trackpad gamers have developed various techniques to improve their performance:
                    </p>
                    <ul class="wiki-list">
                        <li><strong>Arm aiming</strong> - Using larger arm movements rather than just finger movements for better accuracy</li>
                        <li><strong>Tap clicking</strong> - Using tap-to-click for faster response times than physical clicking</li>
                        <li><strong>Sensitivity adjustment</strong> - Finding the optimal balance between precision and speed</li>
                        <li><strong>Edge scrolling</strong> - Using edge areas for camera control in strategy games</li>
                    </ul>
                </section>

                <section id="accessibility">
                    <h2>Accessibility Features</h2>
                    <p>
                        Modern operating systems provide various accessibility features to make trackpads usable for people
                        with different abilities. These features can be crucial for users with motor impairments, tremors,
                        or other conditions that affect fine motor control.
                    </p>
                    <h3>Common Accessibility Options</h3>
                    <ul class="wiki-list">
                        <li><strong>Pointer speed adjustment</strong> - Allows users to set cursor speed according to their needs</li>
                        <li><strong>Click lock</strong> - Enables dragging without holding down a button</li>
                        <li><strong>Sticky keys</strong> - Allows modifier keys to remain active without being held</li>
                        <li><strong>Slow keys</strong> - Requires keys to be held for a period before being registered</li>
                        <li><strong>Pointer trails</strong> - Makes cursor movement easier to track visually</li>
                        <li><strong>Large cursor options</strong> - Increases cursor size for better visibility</li>
                    </ul>
                    <p>
                        Voice control and eye tracking technologies are also emerging as alternatives to traditional trackpad
                        input for users who cannot use conventional pointing devices.
                    </p>
                </section>

                <section id="future">
                    <h2>Future Developments</h2>
                    <p>
                        The future of trackpad technology continues to evolve with several promising developments on the horizon:
                    </p>
                    <h3>Under-Display Trackpads</h3>
                    <p>
                        Research is ongoing into trackpads that can be integrated beneath laptop displays, potentially allowing
                        for larger tracking surfaces or even full-keyboard trackpad integration. This technology would use
                        capacitive sensing through the display glass itself.
                    </p>
                    <h3>Advanced Haptics</h3>
                    <p>
                        Next-generation haptic feedback systems could provide more nuanced tactile responses, simulating
                        different textures or providing location-specific feedback. This could enhance gaming experiences
                        and provide better accessibility features.
                    </p>
                    <h3>AI-Powered Gesture Recognition</h3>
                    <p>
                        Machine learning algorithms are being developed to better recognize user intent and adapt trackpad
                        behavior accordingly. This could include improved palm rejection, predictive cursor movement, and
                        personalized gesture recognition that learns from individual users.
                    </p>
                    <h3>Pressure-Sensitive Displays</h3>
                    <p>
                        As pressure-sensitive technology improves, future laptops may feature displays that can sense pressure
                        across their entire surface, effectively turning the whole screen into a giant trackpad when needed.
                    </p>
                    <div class="wiki-image-block">
                        <div class="placeholder-image large">
                            <span>Concept: Full-Screen Trackpad</span>
                        </div>
                        <p class="image-caption">Artist's concept of a future laptop with pressure-sensitive display technology.</p>
                    </div>
                </section>

                <section id="comparison">
                    <h2>Comparison with Other Input Devices</h2>
                    <p>
                        Trackpads compete with several other pointing device technologies, each with its own advantages
                        and disadvantages:
                    </p>
                    <table class="wiki-table">
                        <thead>
                            <tr>
                                <th>Device</th>
                                <th>Advantages</th>
                                <th>Disadvantages</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Trackpad</td>
                                <td>Built-in, gesture support, no external device needed</td>
                                <td>Less precise than mice, learning curve for gestures</td>
                            </tr>
                            <tr>
                                <td>Mouse</td>
                                <td>High precision, familiar interface, ergonomic options</td>
                                <td>Requires flat surface, not built-in, needs to be carried</td>
                            </tr>
                            <tr>
                                <td>Pointing Stick</td>
                                <td>No finger movement from keyboard, compact</td>
                                <td>Less intuitive, limited gesture support, smaller market</td>
                            </tr>
                            <tr>
                                <td>Touchscreen</td>
                                <td>Direct manipulation, intuitive</td>
                                <td>Arm fatigue, fingerprints on screen, less precise</td>
                            </tr>
                            <tr>
                                <td>Trackball</td>
                                <td>Stationary, precise, ergonomic</td>
                                <td>Larger footprint, learning curve, cleaning required</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section class="wiki-seealso">
                    <h2>See Also</h2>
                    <ul>
                        <li><a href="#">Computer mouse</a></li>
                        <li><a href="#">Pointing stick</a></li>
                        <li><a href="#">Graphics tablet</a></li>
                        <li><a href="#">Touchscreen</a></li>
                    </ul>
                </section>

                <section class="wiki-references">
                    <h2>References</h2>
                    <ol class="references-list">
                        <li>Gerpheide, George E. (1988). "Touch-sensitive input device". US Patent 5,305,017.</li>
                        <li>Apple Computer (1994). "PowerBook 500 Series Technical Documentation".</li>
                        <li>Synaptics Inc. (2020). "Touchpad Technology White Paper".</li>
                        <li>Microsoft (2023). "Windows Precision Touchpad Implementation Guide".</li>
                    </ol>
                </section>
            </div>
        </article>
    </div>

    <!-- Maps Mode View -->
    <div id="maps-view" class="view">
        <!-- Sticky Debug Bar for Maps -->
        <div class="debug-bar maps-debug-bar">
            <div class="state-indicator">
                <span class="state-label">State:</span>
                <span id="maps-state" class="state-value">idle</span>
            </div>
            <div class="bar-stats">
                <div class="bar-stat">
                    <span class="bar-label">Pan:</span>
                    <span id="maps-pan" class="bar-value">0, 0</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Zoom:</span>
                    <span id="maps-zoom" class="bar-value">100%</span>
                    <button id="reset-map-zoom" class="bar-reset-btn">Reset</button>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Pin:</span>
                    <span id="maps-pin" class="bar-value">None</span>
                    <button id="clear-pin" class="bar-reset-btn">Clear</button>
                </div>
            </div>
            <div class="gesture-info">
                <div class="bar-stat">
                    <span class="bar-label">Gesture:</span>
                    <span id="maps-gesture" class="bar-value gesture">-</span>
                </div>
                <div class="bar-stat">
                    <span class="bar-label">Dragging:</span>
                    <span id="maps-dragging" class="bar-value">No</span>
                </div>
            </div>
            <button id="toggle-maps-log" class="bar-toggle-btn">Hide Log</button>
        </div>

        <!-- Floating Event Log for Maps -->
        <div class="floating-event-log maps-event-log">
            <div class="floating-log-header">
                <span>Event Log</span>
                <button id="clear-maps-log" class="clear-btn">Clear</button>
            </div>
            <div id="maps-event-log-content" class="log-content"></div>
        </div>

        <!-- Map Container -->
        <div class="map-container">
            <div id="map-viewport" class="map-viewport">
                <div id="map-content" class="map-content">
                    <!-- Map Grid/Streets -->
                    <div class="map-grid">
                        <!-- Horizontal Streets -->
                        <div class="street horizontal" style="top: 100px;"><span class="street-name">Oak Street</span></div>
                        <div class="street horizontal" style="top: 250px;"><span class="street-name">Maple Avenue</span></div>
                        <div class="street horizontal" style="top: 400px;"><span class="street-name">Pine Road</span></div>
                        <div class="street horizontal" style="top: 550px;"><span class="street-name">Cedar Lane</span></div>
                        <div class="street horizontal" style="top: 700px;"><span class="street-name">Elm Boulevard</span></div>
                        <div class="street horizontal" style="top: 850px;"><span class="street-name">Birch Way</span></div>

                        <!-- Vertical Streets -->
                        <div class="street vertical" style="left: 150px;"><span class="street-name">1st Ave</span></div>
                        <div class="street vertical" style="left: 350px;"><span class="street-name">2nd Ave</span></div>
                        <div class="street vertical" style="left: 550px;"><span class="street-name">3rd Ave</span></div>
                        <div class="street vertical" style="left: 750px;"><span class="street-name">4th Ave</span></div>
                        <div class="street vertical" style="left: 950px;"><span class="street-name">5th Ave</span></div>
                        <div class="street vertical" style="left: 1150px;"><span class="street-name">6th Ave</span></div>

                        <!-- Buildings/Landmarks -->
                        <div class="building park" style="left: 200px; top: 150px; width: 100px; height: 80px;">
                            <span>Central Park</span>
                        </div>
                        <div class="building" style="left: 400px; top: 150px; width: 80px; height: 60px;">
                            <span>Library</span>
                        </div>
                        <div class="building" style="left: 600px; top: 130px; width: 100px; height: 100px;">
                            <span>Mall</span>
                        </div>
                        <div class="building hospital" style="left: 850px; top: 150px; width: 70px; height: 70px;">
                            <span>Hospital</span>
                        </div>

                        <div class="building" style="left: 180px; top: 300px; width: 60px; height: 50px;">
                            <span>Cafe</span>
                        </div>
                        <div class="building school" style="left: 400px; top: 280px; width: 90px; height: 90px;">
                            <span>School</span>
                        </div>
                        <div class="building" style="left: 620px; top: 300px; width: 70px; height: 60px;">
                            <span>Bank</span>
                        </div>
                        <div class="building park" style="left: 800px; top: 280px; width: 120px; height: 100px;">
                            <span>Riverside Park</span>
                        </div>

                        <div class="building" style="left: 200px; top: 450px; width: 80px; height: 70px;">
                            <span>Hotel</span>
                        </div>
                        <div class="building" style="left: 380px; top: 460px; width: 100px; height: 60px;">
                            <span>Supermarket</span>
                        </div>
                        <div class="building" style="left: 580px; top: 440px; width: 60px; height: 80px;">
                            <span>Office</span>
                        </div>
                        <div class="building" style="left: 780px; top: 450px; width: 90px; height: 70px;">
                            <span>Restaurant</span>
                        </div>
                        <div class="building" style="left: 1000px; top: 440px; width: 80px; height: 80px;">
                            <span>Museum</span>
                        </div>

                        <div class="building park" style="left: 180px; top: 600px; width: 140px; height: 80px;">
                            <span>Sports Field</span>
                        </div>
                        <div class="building" style="left: 420px; top: 610px; width: 70px; height: 60px;">
                            <span>Gym</span>
                        </div>
                        <div class="building" style="left: 600px; top: 590px; width: 100px; height: 90px;">
                            <span>Cinema</span>
                        </div>
                        <div class="building" style="left: 820px; top: 600px; width: 80px; height: 70px;">
                            <span>Pharmacy</span>
                        </div>

                        <div class="building" style="left: 220px; top: 760px; width: 90px; height: 60px;">
                            <span>Gas Station</span>
                        </div>
                        <div class="building school" style="left: 400px; top: 750px; width: 100px; height: 80px;">
                            <span>University</span>
                        </div>
                        <div class="building" style="left: 620px; top: 770px; width: 70px; height: 50px;">
                            <span>Post Office</span>
                        </div>
                        <div class="building hospital" style="left: 820px; top: 750px; width: 90px; height: 80px;">
                            <span>Clinic</span>
                        </div>
                        <div class="building park" style="left: 1000px; top: 740px; width: 130px; height: 100px;">
                            <span>Lake Park</span>
                        </div>
                    </div>

                    <!-- Pin marker (will be positioned via JS) -->
                    <div id="map-pin" class="map-pin hidden">
                        <div class="pin-icon">üìç</div>
                        <div class="pin-label">Pin</div>
                    </div>
                </div>
            </div>

            <!-- Right-click Context Menu -->
            <div id="map-context-menu" class="context-menu hidden">
                <div class="context-menu-item" data-action="search">
                    <span class="menu-icon">üîç</span>
                    <span>Search this location</span>
                </div>
                <div class="context-menu-item" data-action="directions">
                    <span class="menu-icon">üß≠</span>
                    <span>Directions from here</span>
                </div>
                <div class="context-menu-item" data-action="add-pin">
                    <span class="menu-icon">üìç</span>
                    <span>Drop a pin here</span>
                </div>
                <div class="context-menu-divider"></div>
                <div class="context-menu-item" data-action="coordinates">
                    <span class="menu-icon">üìê</span>
                    <span class="coords-text">Coordinates: --</span>
                </div>
                <div class="context-menu-divider"></div>
                <div class="context-menu-item" data-action="favorite">
                    <span class="menu-icon">‚≠ê</span>
                    <span>Add to favorites</span>
                </div>
                <div class="context-menu-item" data-action="share">
                    <span class="menu-icon">üì§</span>
                    <span>Share location</span>
                </div>
                <div class="context-menu-item" data-action="print">
                    <span class="menu-icon">üñ®Ô∏è</span>
                    <span>Print map</span>
                </div>
            </div>

            <div class="map-instructions">
                <span>üñ±Ô∏è Drag to pan</span>
                <span>üîç Pinch/Ctrl+Scroll to zoom</span>
                <span>üìç Click to place pin</span>
            </div>
        </div>
    </div>

    <!-- Graph View -->
    <div id="graph-view" class="view">
        <!-- Scrollable overlay for VR scroll detection -->
        <div class="graph-scroll-overlay" id="graph-scroll-overlay">
            <div class="graph-scroll-content"></div>
        </div>

        <!-- Header Bar -->
        <div class="graph-header">
            <h2>Motion Analysis</h2>
            <div class="graph-controls">
                <button id="clear-graphs" class="graph-btn">Clear Graphs</button>
                <button id="export-data" class="graph-btn">Export Data</button>
            </div>
        </div>

        <div class="graph-container">
            <!-- Current Motion Stats -->
            <div class="graph-stats-panel">
                <h3>Current Motion</h3>
                <div class="motion-type-indicator">
                    <span class="motion-label">Motion Type:</span>
                    <span id="graph-motion-type" class="motion-value">None</span>
                </div>
                <div class="motion-stats-grid">
                    <div class="motion-stat">
                        <span class="stat-label">Move X</span>
                        <span id="graph-move-x" class="stat-value">0</span>
                    </div>
                    <div class="motion-stat">
                        <span class="stat-label">Move Y</span>
                        <span id="graph-move-y" class="stat-value">0</span>
                    </div>
                    <div class="motion-stat">
                        <span class="stat-label">Scroll X</span>
                        <span id="graph-scroll-x" class="stat-value">0</span>
                    </div>
                    <div class="motion-stat">
                        <span class="stat-label">Scroll Y</span>
                        <span id="graph-scroll-y" class="stat-value">0</span>
                    </div>
                    <div class="motion-stat">
                        <span class="stat-label">Zoom</span>
                        <span id="graph-zoom-value" class="stat-value">1.00</span>
                    </div>
                    <div class="motion-stat">
                        <span class="stat-label">Duration</span>
                        <span id="graph-duration" class="stat-value">0ms</span>
                    </div>
                </div>
                <div class="motion-status">
                    <span class="status-label">Status:</span>
                    <span id="graph-motion-status" class="status-value idle">Idle</span>
                </div>
            </div>

            <!-- Scroll Y Graph -->
            <div class="graph-panel">
                <div class="graph-title">
                    <h3>Scroll Y (Vertical)</h3>
                    <span class="graph-subtitle">Includes inertia tracking</span>
                </div>
                <div class="graph-canvas-container">
                    <canvas id="scroll-y-graph-canvas"></canvas>
                </div>
                <div class="graph-legend">
                    <span class="legend-item scroll-y-legend">‚óè Delta Y</span>
                </div>
            </div>

            <!-- Scroll X Graph -->
            <div class="graph-panel">
                <div class="graph-title">
                    <h3>Scroll X (Horizontal)</h3>
                    <span class="graph-subtitle">Includes inertia tracking</span>
                </div>
                <div class="graph-canvas-container">
                    <canvas id="scroll-x-graph-canvas"></canvas>
                </div>
                <div class="graph-legend">
                    <span class="legend-item scroll-x-legend">‚óè Delta X</span>
                </div>
            </div>

            <!-- Zoom Graph -->
            <div class="graph-panel">
                <div class="graph-title">
                    <h3>Zoom Delta Over Time</h3>
                    <span class="graph-subtitle">Pinch gesture tracking</span>
                </div>
                <div class="graph-canvas-container">
                    <canvas id="zoom-graph-canvas"></canvas>
                </div>
                <div class="graph-legend">
                    <span class="legend-item zoom-legend">‚óè Zoom Level</span>
                </div>
            </div>

            <!-- Motion History -->
            <div class="graph-history-panel">
                <h3>Motion History</h3>
                <div id="motion-history-list" class="motion-history-list">
                    <div class="history-placeholder">No motions recorded yet</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shape Tests View -->
    <div id="shapes-view" class="view">
        <div class="shapes-header">
            <div class="shapes-header-left">
                <h2>Shape Tracing Tests</h2>
                <p class="shapes-description">Select a shape, click to start tracing, follow the guide path.</p>
            </div>
            <div class="shapes-header-stats">
                <div class="header-stat-group">
                    <span class="header-stat-label">Current:</span>
                    <span class="header-stat">X: <span id="header-offset-x" class="header-stat-value">0</span></span>
                    <span class="header-stat">Y: <span id="header-offset-y" class="header-stat-value">0</span></span>
                    <span class="header-stat">Dist: <span id="header-offset-dist" class="header-stat-value">0</span></span>
                </div>
                <div class="header-stat-group">
                    <span class="header-stat-label">Avg:</span>
                    <span class="header-stat">X: <span id="header-avg-x" class="header-stat-value">0</span></span>
                    <span class="header-stat">Y: <span id="header-avg-y" class="header-stat-value">0</span></span>
                    <span class="header-stat">Dist: <span id="header-avg-dist" class="header-stat-value">0</span></span>
                </div>
                <div class="header-stat-group">
                    <span class="header-stat-label">Status:</span>
                    <span id="header-test-state" class="header-status-badge idle">Ready</span>
                </div>
                <div class="header-stat-group">
                    <span class="header-stat-label">Progress:</span>
                    <span id="header-progress" class="header-stat-value">0%</span>
                </div>
                <div id="header-results" class="header-stat-group header-results hidden">
                    <span class="header-stat-label">Results:</span>
                    <span class="header-stat">Avg: <span id="header-result-avg" class="header-result-value">0</span></span>
                    <span class="header-stat">Max: <span id="header-result-max" class="header-result-value">0</span></span>
                    <span class="header-stat">Acc: <span id="header-result-acc" class="header-result-value">0%</span></span>
                </div>
            </div>
            <button id="header-reset-btn" class="header-reset-btn" onclick="resetShapeTest();">Reset</button>
        </div>

        <div class="shapes-container">
            <!-- Shape Selection Panel -->
            <div class="shapes-control-panel">
                <h3>Select Shape</h3>
                <div class="shape-buttons">
                    <button class="shape-btn active" data-shape="circle">
                        <span class="shape-icon">‚óØ</span>
                        <span class="shape-name">Circle</span>
                    </button>
                    <button class="shape-btn" data-shape="horizontal">
                        <span class="shape-icon">‚Äï</span>
                        <span class="shape-name">Horizontal</span>
                    </button>
                    <button class="shape-btn" data-shape="vertical">
                        <span class="shape-icon">‚îÇ</span>
                        <span class="shape-name">Vertical</span>
                    </button>
                    <button class="shape-btn" data-shape="diagonal-up">
                        <span class="shape-icon">‚ï±</span>
                        <span class="shape-name">Diagonal ‚Üó</span>
                    </button>
                    <button class="shape-btn" data-shape="diagonal-down">
                        <span class="shape-icon">‚ï≤</span>
                        <span class="shape-name">Diagonal ‚Üò</span>
                    </button>
                </div>

                <!-- Results Panel (shown after completion) -->
                <div id="shape-results" class="results-panel hidden">
                    <h3>Results</h3>
                    <div class="results-grid-detailed">
                        <div class="results-row">
                            <span class="result-header"></span>
                            <span class="result-header">X</span>
                            <span class="result-header">Y</span>
                            <span class="result-header">Combined</span>
                        </div>
                        <div class="results-row">
                            <span class="result-label">Avg</span>
                            <span id="result-avg-x" class="result-value">0</span>
                            <span id="result-avg-y" class="result-value">0</span>
                            <span id="result-avg-combined" class="result-value">0</span>
                        </div>
                        <div class="results-row">
                            <span class="result-label">Max</span>
                            <span id="result-max-x" class="result-value">0</span>
                            <span id="result-max-y" class="result-value">0</span>
                            <span id="result-max-combined" class="result-value">0</span>
                        </div>
                        <div class="results-row accuracy-row">
                            <span class="result-label">Accuracy</span>
                            <span id="result-accuracy" class="result-value accuracy-value" colspan="3">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Reset Button -->
                <button id="reset-shape-test" class="reset-shape-btn" onclick="console.log('onclick fired'); resetShapeTest();">Reset Test</button>

                <!-- History Panel -->
                <div class="history-panel">
                    <h3>History (Last 10)</h3>
                    <div id="shape-history-list" class="history-list">
                        <div class="history-empty">No attempts yet</div>
                    </div>
                </div>
            </div>

            <!-- Canvas Area -->
            <div class="shapes-canvas-area">
                <canvas id="shapes-canvas"></canvas>
                <div class="canvas-instructions">
                    <span id="shape-instruction">Click anywhere to start the test</span>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
